<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>mdiki View</title>

    <!-- OGP Settings -->
    <meta property="og:title" content="mdiki - Simple File-based Wiki">
    <meta property="og:type" content="article">
    <meta property="og:description"
        content="A simple, lightweight markdown file-based wiki system with Material Design.">
    <meta property="og:image" content="https://mdiki.tetsuakibaba.jp/assets/images/ogp.png">
    <meta name="twitter:card" content="summary_large_image">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://mdiki.tetsuakibaba.jp/assets/images/32x32.png">
    <link rel="apple-touch-icon" href="https://mdiki.tetsuakibaba.jp/assets/images/180x180.png">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/TetsuakiBaba/MarkPaper/markpaper.css">
    <style>
        /* MarkPaperのデフォルトの最大幅制限を解除して、画面いっぱいに表示する */
        article#content {
            max-width: none !important;
            margin: 0 !important;
            padding: 40px !important;
        }
    </style>
</head>

<body>
    <article id="content">Loading...</article>
    <script src="https://cdn.jsdelivr.net/gh/TetsuakiBaba/MarkPaper/markpaper.js" crossorigin="anonymous"
        type="text/javascript"></script>
    <script>
        // パスの自動補完を追加するためのフック
        (function () {
            // 1. URLパラメータの 'file' を書き換えて、mds/ を自動付与する
            const urlParams = new URLSearchParams(window.location.search);
            const fileParam = urlParams.get('file');
            if (fileParam && !fileParam.startsWith('http') && !fileParam.startsWith('mds/')) {
                urlParams.set('file', 'mds/' + fileParam);
                // 履歴を書き換えて、markpaper.js が新しいパスを参照するようにする
                const newUrl = window.location.pathname + '?' + urlParams.toString();
                window.history.replaceState(null, '', newUrl);
            }
        })();
    </script>
</body>

</html>